module.exports=[67868,a=>{"use strict";var b=a.i(11718),c=a.i(26617),d=a.i(16876),e=a.i(71964),f=a.i(19639),g=a.i(79782),h=a.i(52923);function i({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,h.cn)("w-full caption-bottom text-sm",a),...c})})}function j({className:a,...c}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,h.cn)("[&_tr]:border-b",a),...c})}function k({className:a,...c}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,h.cn)("[&_tr:last-child]:border-0",a),...c})}function l({className:a,...c}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,h.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...c})}function m({className:a,...c}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,h.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}function n({className:a,...c}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,h.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}var o=a.i(49769),p=a.i(75780);let q=(0,p.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),r=(0,p.default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function s(){let{categories:a,tableData:c,fetchTableData:h,deleteTransaction:p,currentTableOptions:s}=(0,g.useTransactions)(),[t,u]=(0,d.useState)(s.page),[v,w]=(0,d.useState)(s.limit),[x,y]=(0,d.useState)(s.sort||{field:"date",direction:"desc"}),[z,A]=(0,d.useState)(s.filters||{}),B=(0,f.useRouter)();(0,d.useEffect)(()=>{u(s.page),w(s.limit),y(s.sort||{field:"date",direction:"desc"}),A(s.filters||{})},[s]),(0,d.useEffect)(()=>{(async()=>{try{await h({page:t,limit:v,sort:x.field?x:void 0,filters:Object.keys(z).length>0?z:void 0})}catch(a){console.error("Error loading table data:",a)}})()},[t,v,x,z,h]);let C=a=>{let b="desc";x.field===a&&(b="desc"===x.direction?"asc":"asc"===x.direction?null:"asc"),y({field:b?a:null,direction:b}),u(1)},D=async a=>{if(confirm("Удалить операцию?"))try{await p(a)}catch(a){console.error("Error deleting transaction:",a)}},E=a=>{A(a),u(1)};return(0,d.useEffect)(()=>{0===c.transactions.length&&t>1&&!c.loading&&u(a=>Math.max(1,a-1))},[c.transactions.length,t,c.loading]),(0,b.jsxs)("div",{className:"max-h-[600px] overflow-scroll max-w-2xl lg:max-w-3xl bg-[#f5f6fb] dark:bg-[#0c1017] pt-0 p-5 pb-0 mt-4 rounded-lg border border-gray-300 dark:border-gray-600 shadow-md shadow-gray-500 dark:shadow-gray-800 no-scrollbar",children:[(0,b.jsxs)("div",{className:"sticky top-0 z-2 flex items-center justify-between pt-4 pb-4 bg-[#f5f6fb] dark:bg-[#0c1017]",children:[(0,b.jsx)("span",{className:"flex items-start justify-between text-lg sm:text-xl font-bold",children:"Transactions"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("select",{value:z.type||"",onChange:a=>E({...z,type:a.target.value}),className:"border border-gray-300 bg-white dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-900 rounded p-1 text-sm",children:[(0,b.jsx)("option",{value:"",children:"All Types"}),(0,b.jsx)("option",{value:"income",children:"Income"}),(0,b.jsx)("option",{value:"expense",children:"Expense"})]}),(0,b.jsxs)("select",{value:z.category||"",onChange:a=>E({...z,category:a.target.value}),className:"border border-gray-300 bg-white dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-900 rounded p-1 text-sm w-30 md:w-40",children:[(0,b.jsx)("option",{value:"",children:"All Categories"}),a.map(a=>(0,b.jsx)("option",{value:String(a.id),children:a.name},a.id))]}),(0,b.jsx)("input",{type:"text",placeholder:"Search description",value:z.description||"",onChange:a=>E({...z,description:a.target.value}),className:"border border-gray-300 bg-white dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-900 rounded p-1 text-sm w-20 md:w-35"})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("label",{htmlFor:"pageSize",className:"mr-2 text-sm",children:"Show:"}),(0,b.jsx)("select",{id:"pageSize",value:v,onChange:a=>{w(Number(a.target.value)),u(1)},className:"border border-gray-300 bg-white dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-900 rounded p-1 text-sm",children:[10,20,50].map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]})]})]}),(0,b.jsxs)(i,{className:"max-w-md md:max-w-xl",children:[(0,b.jsx)(j,{children:(0,b.jsxs)(l,{children:[(0,b.jsxs)(m,{className:"cursor-pointer",onClick:()=>C("date"),children:["Date"," ","date"===x.field?"asc"===x.direction?"▲":"▼":""]}),(0,b.jsx)(m,{children:"Category"}),(0,b.jsx)(m,{children:"Description"}),(0,b.jsx)(m,{children:"Type"}),(0,b.jsxs)(m,{className:"text-center cursor-pointer",onClick:()=>C("amount"),children:["Sum"," ","amount"===x.field?"asc"===x.direction?"▲":"▼":""]}),(0,b.jsx)(m,{children:"Actions"})]})}),(0,b.jsx)(k,{children:c.loading?(0,b.jsx)(l,{children:(0,b.jsx)(n,{colSpan:6,className:"text-center",children:"Loading..."})}):0===c.transactions.length?(0,b.jsx)(l,{children:(0,b.jsx)(n,{colSpan:6,className:"text-center",children:"No operations found"})}):c.transactions.map(d=>(0,b.jsxs)(l,{className:"group hover:bg-gray-300 dark:hover:bg-gray-900 cursor-pointer",onClick:()=>B.push(`/users/${d.id}`),children:[(0,b.jsx)(n,{children:new Date(d.date).toLocaleDateString("ru-RU")}),(0,b.jsx)(n,{children:(b=>{if(!a.length)return"Unknown";let c=a.find(a=>a.id==b);if(c||(c=a.find(a=>String(a.id)===String(b))),!c){let d=Number(b);isNaN(d)||(c=a.find(a=>Number(a.id)===d))}return c?c.name:"Unknown"})(d.category)}),(0,b.jsx)(n,{className:"overflow-scroll min-w-30 max-w-45",children:d.description}),(0,b.jsx)(n,{children:"expense"===d.type||"expence"===d.type?"Расход":"Доход"}),(0,b.jsx)(n,{className:"text-right md:min-w-30 min-w-15 md:max-w-40 max-w-25 overflow-scroll",children:(0,b.jsxs)("span",{className:"expense"===d.type||"expence"===d.type?"text-red-600 opacity-90":"text-green-600 opacity-90",children:["expense"===d.type||"expence"===d.type?"-":"+",Math.abs(d.amount).toFixed(2)," BYN"]})}),(0,b.jsx)(n,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.default,{href:`/users/${d.id}/edit`,passHref:!0,children:(0,b.jsx)(o.Button,{variant:"ghost",size:"icon","aria-label":"Редактировать",onClick:a=>a.stopPropagation(),className:"opacity-0 group-hover:opacity-100 transition cursor-pointer",children:(0,b.jsx)(q,{className:"w-4 h-4"})})}),(0,b.jsx)(o.Button,{variant:"ghost",size:"icon","aria-label":"Удалить",onClick:a=>{a.stopPropagation(),D(d.id)},className:"opacity-0 group-hover:opacity-100 transition",disabled:c.loading,children:(0,b.jsx)(r,{className:"w-4 h-4 text-red-600"})})]})})]},d.id))})]}),(0,b.jsxs)("div",{className:"sticky bottom-0 z-200 flex items-center justify-between mt-4 pt-2 pb-4 bg-[#f5f6fb] dark:bg-[#0c1017]",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",c.transactions.length," of ",c.totalItems," ","transactions"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Button,{disabled:1===t||c.loading,onClick:()=>u(a=>Math.max(1,a-1)),size:"sm",children:"Prev"}),(0,b.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(c.totalPages,5)},(a,d)=>{let e=d+1;return c.totalPages>5&&(e=Math.max(1,t-2)+d)>c.totalPages?null:(0,b.jsx)(o.Button,{size:"sm",variant:t===e?"default":"outline",onClick:()=>u(e),className:"hover:bg-gray-300 dark:hover:bg-gray-900 min-w-[40px]",disabled:c.loading,children:e},e)})}),(0,b.jsx)(o.Button,{disabled:t===c.totalPages||0===c.totalPages||c.loading,onClick:()=>u(a=>Math.min(c.totalPages,a+1)),size:"sm",children:"Next"})]})]})]})}var t=a.i(67871),u=a.i(14568),v=a.i(42732),w=a.i(21892),x=a.i(19860),y=a.i(58924);let z=new t.default;function A(){let{categories:a,addTransaction:c,refreshData:e}=(0,g.useTransactions)(),[f,h]=(0,d.useState)({amount:0,category:"",description:"",type:"expense",date:new Date().toISOString().split("T")[0]}),[i,j]=(0,d.useState)(!1),[k,l]=(0,d.useState)(null);(0,d.useEffect)(()=>{a.length>0&&!f.category&&h(b=>({...b,category:String(a[0].id)}))},[a,f.category]),(0,d.useEffect)(()=>{if(k){let a=setTimeout(()=>{l(null)},3e3);return()=>clearTimeout(a)}},[k]);let m=async b=>{b.preventDefault(),j(!0),l(null);try{let b=await z.createTransaction({amount:f.amount,category:f.category,description:f.description,type:f.type,date:new Date(f.date).toISOString()});l({type:"success",text:"Operation created successfully!"}),b.data&&c(b.data),await e(),h({amount:0,category:a.length>0?String(a[0].id):"",description:"",type:"expense",date:new Date().toISOString().split("T")[0]})}catch(a){l({type:"error",text:a instanceof Error?a.message:"Failed to create operation"})}finally{j(!1)}},n=a=>{let{name:b,value:c}=a.target;h(a=>({...a,[b]:"amount"===b?parseFloat(c)||!0:c}))};return(0,b.jsxs)(u.Card,{className:"max-w-lg sm:max-w-xs mx-auto p-2 sm:p-4 bg-[#f5f6fb] dark:bg-[#0c1017] rounded-lg shadow-md shadow-gray-500 dark:shadow-gray-800 border-gray-300 dark:border-gray-600",children:[(0,b.jsx)(u.CardHeader,{children:(0,b.jsx)(u.CardTitle,{className:"text-lg sm:text-xl pt-2",children:"Create New Operation"})}),(0,b.jsx)(u.CardContent,{children:(0,b.jsxs)("form",{onSubmit:m,className:"md:space-y-4 space-y-3 p-1",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"type",children:"Type"}),(0,b.jsxs)(y.Select,{value:f.type,onValueChange:a=>h(b=>({...b,type:a})),children:[(0,b.jsx)(y.SelectTrigger,{id:"type",name:"type",className:"bg-white border border-gray-300 dark:bg-gray-600 transition-colors w-full",children:(0,b.jsx)(y.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(y.SelectContent,{className:"bg-gray-200 dark:bg-gray-600",children:[(0,b.jsx)(y.SelectItem,{value:"expense",className:"bg-white dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-900",children:"Expense"}),(0,b.jsx)(y.SelectItem,{value:"income",className:"bg-white dark:bg-gray-600 dark:hover:bg-gray-900",children:"Income"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"amount",children:"Amount"}),(0,b.jsx)(v.Input,{className:"bg-white border border-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-900",type:"number",id:"amount",name:"amount",min:0,step:"0.01",value:f.amount,onChange:n,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"category",children:"Category"}),(0,b.jsxs)(y.Select,{value:f.category,onValueChange:a=>h(b=>({...b,category:a})),children:[(0,b.jsx)(y.SelectTrigger,{id:"category",name:"category",className:"bg-white border border-gray-300 dark:bg-gray-600 transition-colors w-full",children:(0,b.jsx)(y.SelectValue,{placeholder:"Select category"})}),(0,b.jsx)(y.SelectContent,{className:"bg-gray-200 dark:bg-gray-600",children:a.map(a=>(0,b.jsx)(y.SelectItem,{className:"bg-white hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-900",value:String(a.id),children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(x.Textarea,{className:"bg-white dark:bg-gray-600 border-gray-300 max-w-48 resize-none overflow-hidden",id:"description",name:"description",rows:3,value:f.description,onChange:n,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"date",children:"Date"}),(0,b.jsx)(v.Input,{className:"bg-white hover:bg-gray-300 dark:bg-gray-600 border border-gray-300",type:"date",id:"date",name:"date",value:f.date,onChange:n,required:!0})]}),k&&(0,b.jsx)("div",{className:`rounded-md p-3 ${"success"===k.type?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:k.text}),(0,b.jsx)(o.Button,{type:"submit",disabled:i,className:"w-full dark:bg-blue-500 bg-blue-400 hover:bg-blue-300 rounded-xl p-2 dark:hover:bg-blue-400",children:i?"Creating...":"Create Operation"})]})})]})}function B(){let[a,e]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{let a=()=>{window.innerWidth>=1024&&e(!1)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),(0,b.jsxs)("div",{className:"min-h-screen ",children:[(0,b.jsx)(c.default,{}),(0,b.jsxs)("main",{className:"flex pt-16 mx-auto ",children:[(0,b.jsx)("div",{className:"lg:hidden flex-start mt-8 z-1000 left-0 top-0 sticky",children:(0,b.jsx)(o.Button,{className:"dark:bg-gray-600 bg-gray-300 p-2 z-1000 dark:border-gray-300 border",onClick:()=>e(a=>!a),"aria-label":a?"Hide Create Transaction":"Show Create Transaction",children:a?"<":">"})}),(0,b.jsx)("div",{className:`
    fixed lg:hidden shrink-0 w-72 mt-8 shadow-md top-16 left-0 h-[calc(100vh-10rem)] z-50
    transition-transform duration-300 ease-in-out
    ${a?"translate-x-0":"-translate-x-full"}
  `,children:(0,b.jsx)(A,{})}),(0,b.jsx)("div",{className:`
            hidden lg:flex shrink-0 w-72 ml-4 mt-8 shadow-md
            fixed top-16  z-30
          `,children:(0,b.jsx)(A,{})}),a&&(0,b.jsx)("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>e(!1),"aria-hidden":"true"}),(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center lg:ml-70 mt-4",children:(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsx)(s,{})})})]})]})}a.s(["default",()=>B],67868)}];

//# sourceMappingURL=Documents_GitHub_NextFinanceApp_app_page_tsx_4f549d10._.js.map