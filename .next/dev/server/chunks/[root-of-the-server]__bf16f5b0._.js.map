{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/vitaliylevdansky/Documents/GitHub/NextFinanceApp/app/categories/route.ts"],"sourcesContent":["/**\n * app/categories/route.ts\n * \n * This file implements the API route handler for fetching all categories.\n * Categories are read-only in this app (no create/update/delete endpoints).\n * \n * ROUTE:\n * - File location: `app/categories/route.ts`\n * - Creates endpoint: `GET /categories`\n * \n * RESPONSE:\n * Returns array of category objects:\n * [\n *   { id: \"1\", name: \"Инвестиции\" },\n *   { id: \"2\", name: \"Подарки\" },\n *   ...\n * ]\n * \n * USAGE:\n * Used by:\n * - TransactionContext.getAllCategories() to populate category dropdowns\n * - Page components to display category names for transactions\n * \n * PERFORMANCE NOTE:\n * Categories are cached in Api class (#categoriesCache) to avoid repeated\n * API calls since categories rarely change.\n */\nimport { NextResponse } from \"next/server\";\nimport fs from \"fs/promises\";\nimport path from \"path\";\n\n// Category type matching db.json structure\ntype Category = {\n  id: string;\n  name: string;\n};\n\n// Database file structure (we only need categories here)\ntype DbShape = {\n  transactions: any[];  // Not used in this file, but part of db.json structure\n  categories: Category[];\n};\n\n// Path to database file\nconst DB_PATH = path.join(process.cwd(), \"server\", \"db.json\");\n\n/**\n * Reads database from disk\n */\nasync function readDb(): Promise<DbShape> {\n  const file = await fs.readFile(DB_PATH, \"utf-8\");\n  return JSON.parse(file) as DbShape;\n}\n\n/**\n * GET /categories\n * \n * Returns all categories from the database.\n * Simple read-only endpoint - no filtering or pagination needed.\n */\nexport async function GET() {\n  const db = await readDb();\n  // Return just the categories array\n  return NextResponse.json(db.categories);\n}\n\n\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;CA0BC;;;;AACD;AACA;AACA;;;;AAcA,wBAAwB;AACxB,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU;AAEnD;;CAEC,GACD,eAAe;IACb,MAAM,OAAO,MAAM,gIAAE,CAAC,QAAQ,CAAC,SAAS;IACxC,OAAO,KAAK,KAAK,CAAC;AACpB;AAQO,eAAe;IACpB,MAAM,KAAK,MAAM;IACjB,mCAAmC;IACnC,OAAO,yLAAY,CAAC,IAAI,CAAC,GAAG,UAAU;AACxC","debugId":null}}]
}