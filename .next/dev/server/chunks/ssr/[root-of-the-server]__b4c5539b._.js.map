{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/vitaliylevdansky/Desktop/PROGRAMMING/prog/my-app-router/my-app/app/%28auth%29/users/%5Bid%5D/edit/page.tsx"],"sourcesContent":["import Api, { Transaction, Category } from \"@/app/services/logic\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default async function EditTransactionPage({ \n  params \n}: { \n  params: Promise<{ id: string }> \n}) {\n  // Await the params promise\n  const { id } = await params;\n  const api = new Api();\n\n  try {\n    // Fetch data in parallel\n    const [categories, transaction] = await Promise.all([\n      api.getAllCategories(),\n      api.getTransactionById(id)\n    ]);\n\n    if (!transaction) {\n      return <div className=\"text-red-600 p-4 text-center\">Transaction not found</div>;\n    }\n\n    // Format date for input[type=date]\n    const formattedTransaction = {\n      ...transaction,\n      date: new Date(transaction.date).toISOString().split(\"T\")[0]\n    };\n\n    return (\n      <div className=\"max-w-xl p-6 rounded-md bg-[#f5f6fb] dark:bg-[#0c1017] dark:text-white shadow-md mx-auto mt-8\">\n        <h1 className=\"text-2xl font-semibold mb-6\">Edit Transaction</h1>\n        <EditForm \n          transaction={formattedTransaction} \n          categories={categories} \n        />\n      </div>\n    );\n  } catch (error) {\n    console.error(\"Error loading transaction:\", error);\n    return <div className=\"text-red-600 p-4 text-center\">Failed to load transaction</div>;\n  }\n}\n\n// Client component for the form\nfunction EditForm({ \n  transaction, \n  categories \n}: { \n  transaction: Transaction; \n  categories: Category[] \n}) {\n  const router = useRouter();\n  const api = new Api();\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [formData, setFormData] = useState(transaction);\n\n  function handleChange(\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>\n  ) {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: name === \"amount\" ? parseFloat(value) || 0 : value,\n    }));\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    if (!formData.id) return;\n\n    setSaving(true);\n    setError(null);\n    try {\n      await api.updateTransaction(formData.id, {\n        amount: formData.amount,\n        category: formData.category,\n        description: formData.description,\n        type: formData.type,\n        date: new Date(formData.date).toISOString(),\n      });\n      router.push(\"/\");\n    } catch (err) {\n      console.error(\"Error updating transaction:\", err);\n      setError(\"Failed to save transaction\");\n    } finally {\n      setSaving(false);\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"flex flex-col gap-6\">\n      <div className=\"block\">\n        <span className=\"font-medium mb-1 block\">Type</span>\n        <select\n          name=\"type\"\n          value={formData.type}\n          onChange={handleChange}\n          className=\"w-full rounded border border-gray-300 bg-white dark:bg-gray-700 p-2 dark:text-white\"\n          required\n        >\n          <option value=\"expense\">Expense</option>\n          <option value=\"income\">Income</option>\n        </select>\n      </div>\n\n      <div className=\"block\">\n        <span className=\"font-medium mb-1 block\">Amount</span>\n        <input\n          type=\"number\"\n          name=\"amount\"\n          value={formData.amount}\n          min={0}\n          step=\"0.01\"\n          className=\"w-full rounded border border-gray-300 bg-white dark:bg-gray-700 p-2 dark:text-white\"\n          onChange={handleChange}\n          required\n        />\n      </div>\n\n      <div className=\"block\">\n        <span className=\"font-medium mb-1 block\">Category</span>\n        <select\n          name=\"category\"\n          value={formData.category}\n          onChange={handleChange}\n          className=\"w-full rounded border border-gray-300 bg-white dark:bg-gray-700 p-2 dark:text-white\"\n          required\n        >\n          {categories.map((cat) => (\n            <option key={cat.id} value={String(cat.id)}>\n              {cat.name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"block\">\n        <span className=\"font-medium mb-1 block\">Description</span>\n        <textarea\n          name=\"description\"\n          rows={3}\n          value={formData.description}\n          onChange={handleChange}\n          className=\"w-full rounded border border-gray-300 bg-white dark:bg-gray-700 p-2 dark:text-white resize-none\"\n          required\n        />\n      </div>\n\n      <div className=\"block\">\n        <span className=\"font-medium mb-1 block\">Date</span>\n        <input\n          type=\"date\"\n          name=\"date\"\n          value={formData.date}\n          onChange={handleChange}\n          className=\"w-full rounded border border-gray-300 bg-white dark:bg-gray-700 p-2 dark:text-white\"\n          required\n        />\n      </div>\n\n      {error && <div className=\"text-red-600 bg-red-100 dark:bg-red-900 p-3 rounded\">{error}</div>}\n\n      <div className=\"flex gap-4\">\n      <Button asChild\n          type=\"button\"\n          onClick={() => router.back()}\n          className=\"flex-1 bg-gray-500 text-white p-3 rounded hover:bg-gray-400\"\n        >\n          <a href={`/users/${transaction.id}`}>\n          Cancel\n          </a>\n        </Button>\n        <button\n          type=\"submit\"\n          disabled={saving}\n          className=\"flex-1 bg-blue-600 text-white p-3 rounded hover:bg-blue-500 disabled:opacity-70\"\n        >\n          {saving ? \"Saving...\" : \"Save Changes\"}\n        </button>\n      </div>\n    </form>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}