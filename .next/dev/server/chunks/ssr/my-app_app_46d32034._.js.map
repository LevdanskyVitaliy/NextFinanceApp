{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vitaliylevdansky/Desktop/PROGRAMMING/prog/my-app-router/my-app/app/services/logic.ts"],"sourcesContent":["\n\n\nexport type Transaction = {\n  id?: string | number\n  amount: number\n  date: string\n  category: string\n  description: string\n  type: \"expense\" | \"income\" | string\n}\n\nexport type SortOptions ={\n  field: string | null;\n  direction: \"desc\" | \"asc\" | null;\n}\n\ninterface Params {\n  page?: number;\n  limit?: number;\n  filters?: Record<string, any>;\n  sort?: SortOptions;\n}\n\nexport type Category = {\n  id: string | number\n  name: string\n}\n\nclass Api {\n  #baseURL = \"http://localhost:3000\";\n  #categoriesCache: Category [] | null = null;\n\n  async #fetch(path: string, options?: RequestInit): Promise<any> {\n    const response = await fetch(this.#baseURL + path, options)\n    if (!response.ok) {\n      const text = await response.text()\n      throw new Error(`HTTP error ${response.status}: ${text}`)\n    }\n  \n    return await response.json()\n  }\n\n\n  getAllCategories = async (): Promise<Category[]> => {\n    if (!this.#categoriesCache) {\n      const categories = await this.#fetch(\"/categories\");\n      this.#categoriesCache = Array.isArray(categories) ? categories : [];\n    }\n    return this.#categoriesCache;\n  };\n\n  createTransaction = (transaction: Transaction): Promise<Transaction> => {\n    // Should the cache always be cleared? Review if necessary\n    this.#categoriesCache = null;\n    return this.#fetch(\"/transactions\", { method: \"POST\", body: JSON.stringify(transaction) });\n  };\n\n  deleteTransaction = (id: number | string): Promise<void> =>\n    this.#fetch(`/transactions/${id}`, { method: \"DELETE\" });\n\n  updateTransaction = (id: number | string, updates: Partial<Transaction>): Promise<Transaction> =>\n    this.#fetch(`/transactions/${id}`, { \n      method: \"PATCH\", \n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(updates) \n    });\n\n  // NEW: Add method to get single transaction\n\n  getTransactionById = async (id: string | number): Promise<Transaction> => {\n    const response = await fetch(`${this.#baseURL}/transactions/${id}`);\n    \n    if (!response.ok) {\n      if (response.status === 404) {\n        throw new Error(`Transaction with id ${id} not found`);\n      }\n      const text = await response.text();\n      throw new Error(`HTTP error ${response.status}: ${text}`);\n    }\n    \n    return await response.json();\n  };\n\n  async getTransactions(params: Params = {}): Promise<Transaction> {\n    const { page = 1, limit = 10, filters = {}, sort = { field: '', direction: 'desc'}} = params;\n    const query = new URLSearchParams({ _page: page.toString(), _per_page: limit.toString(), ...filters });\n\n    if (sort.field) {\n      query.set(\"_sort\", sort.direction === \"desc\" ? `-${sort.field}` : sort.field);\n    }\n\n    const result = await this.#fetch(`/transactions?${query.toString()}` );\n    return { ...result, currentPage: page };\n  }\n}\n\nexport default Api;\n"],"names":[],"mappings":";;;;AA6BA,MAAM;IACJ,CAAA,OAAQ,GAAG,wBAAwB;IACnC,CAAA,eAAgB,GAAuB,KAAK;IAE5C,MAAM,CAAA,KAAM,CAAC,IAAY,EAAE,OAAqB;QAC9C,MAAM,WAAW,MAAM,MAAM,IAAI,CAAC,CAAA,OAAQ,GAAG,MAAM;QACnD,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,MAAM;QAC1D;QAEA,OAAO,MAAM,SAAS,IAAI;IAC5B;IAGA,mBAAmB;QACjB,IAAI,CAAC,IAAI,CAAC,CAAA,eAAgB,EAAE;YAC1B,MAAM,aAAa,MAAM,IAAI,CAAC,CAAA,KAAM,CAAC;YACrC,IAAI,CAAC,CAAA,eAAgB,GAAG,MAAM,OAAO,CAAC,cAAc,aAAa,EAAE;QACrE;QACA,OAAO,IAAI,CAAC,CAAA,eAAgB;IAC9B,EAAE;IAEF,oBAAoB,CAAC;QACnB,0DAA0D;QAC1D,IAAI,CAAC,CAAA,eAAgB,GAAG;QACxB,OAAO,IAAI,CAAC,CAAA,KAAM,CAAC,iBAAiB;YAAE,QAAQ;YAAQ,MAAM,KAAK,SAAS,CAAC;QAAa;IAC1F,EAAE;IAEF,oBAAoB,CAAC,KACnB,IAAI,CAAC,CAAA,KAAM,CAAC,CAAC,cAAc,EAAE,IAAI,EAAE;YAAE,QAAQ;QAAS,GAAG;IAE3D,oBAAoB,CAAC,IAAqB,UACxC,IAAI,CAAC,CAAA,KAAM,CAAC,CAAC,cAAc,EAAE,IAAI,EAAE;YACjC,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB,GAAG;IAEL,4CAA4C;IAE5C,qBAAqB,OAAO;QAC1B,MAAM,WAAW,MAAM,MAAM,GAAG,IAAI,CAAC,CAAA,OAAQ,CAAC,cAAc,EAAE,IAAI;QAElE,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,IAAI,SAAS,MAAM,KAAK,KAAK;gBAC3B,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,GAAG,UAAU,CAAC;YACvD;YACA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,MAAM;QAC1D;QAEA,OAAO,MAAM,SAAS,IAAI;IAC5B,EAAE;IAEF,MAAM,gBAAgB,SAAiB,CAAC,CAAC,EAAwB;QAC/D,MAAM,EAAE,OAAO,CAAC,EAAE,QAAQ,EAAE,EAAE,UAAU,CAAC,CAAC,EAAE,OAAO;YAAE,OAAO;YAAI,WAAW;QAAM,CAAC,EAAC,GAAG;QACtF,MAAM,QAAQ,IAAI,gBAAgB;YAAE,OAAO,KAAK,QAAQ;YAAI,WAAW,MAAM,QAAQ;YAAI,GAAG,OAAO;QAAC;QAEpG,IAAI,KAAK,KAAK,EAAE;YACd,MAAM,GAAG,CAAC,SAAS,KAAK,SAAS,KAAK,SAAS,CAAC,CAAC,EAAE,KAAK,KAAK,EAAE,GAAG,KAAK,KAAK;QAC9E;QAEA,MAAM,SAAS,MAAM,IAAI,CAAC,CAAA,KAAM,CAAC,CAAC,cAAc,EAAE,MAAM,QAAQ,IAAI;QACpE,OAAO;YAAE,GAAG,MAAM;YAAE,aAAa;QAAK;IACxC;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/vitaliylevdansky/Desktop/PROGRAMMING/prog/my-app-router/my-app/app/%28auth%29/users/layout.tsx"],"sourcesContent":["\nimport { Card, CardContent } from '@/components/ui/card'\nimport Link from 'next/link'\n\nimport Api, { Transaction, SortOptions } from '@/app/services/logic';\n\n\nconst api = new Api();\n\n  \n\nexport default async function TransactionsLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode\n}>) {\n\n\n  const options: SortOptions= {\n    field: 'date',\n    direction: \"desc\",\n  }\n\n\n  try {\n    const [transactionsResult, categoriesResult] = await Promise.all([\n      api.getTransactions({page:1, limit:1000, sort: options }),\n      api.getAllCategories()\n    ]);\n    \n   \n\n    const transactions = transactionsResult.data || [];\n\n\n    const getCategoryName = (categoryId: string | number): string => {\n      if (!categoryId) return 'Uncategorized';\n      \n      const category = categoriesResult.find(cat => \n        cat.id == categoryId || \n        String(cat.id) === String(categoryId) ||\n        Number(cat.id) === Number(categoryId)\n      );\n      return category?.name || 'Uncategorized';\n    };\n\n    // Format date for display\n    const formatDate = (dateString: string) => {\n      try {\n        return new Date(dateString).toLocaleDateString('en-US', {\n          year: 'numeric',\n          month: 'short',\n          day: 'numeric'\n        });\n      } catch {\n        return 'Invalid Date';\n      }\n    };\n\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"container mx-auto \">\n          <div className=\"flex gap-30\">\n            {/* Sidebar - Transactions List */}\n            <div className=\"lg:w-80 shrink-0 ml-4\">\n              <div className=\"sticky top-6 \">\n                <h2 className=\"text-xl font-bold mb-4 text-foreground\">Transactions</h2>\n                <div className=\"space-y-3 max-h-[calc(100vh-120px)] overflow-y-auto no-scrollbar\">\n                  {transactions.length === 0 ? (\n                    <Card className=\"p-4 text-center\">\n                      <p className=\"text-muted-foreground\">No transactions found</p>\n                    </Card>\n                  ) : (\n                    transactions.map((transaction: Transaction) => (\n                      <Card  \n                        key={transaction.id} \n                        className=\"hover:bg-accent dark:hover:bg-accent transition-colors duration-200 border shadow-md bg-[#f5f6fb] dark:bg-[#0c1017] border-gray-300 dark:border-gray-600\"\n                      >\n                        <CardContent className=\"p-4\"  key={transaction.id} >\n                          <Link \n                            href={`/users/${transaction.id}`}\n                            className=\"block hover:no-underline group\"\n                          >\n                            <div className=\"space-y-2\">\n                              <div className=\"flex justify-between items-start\">\n                                <h3 className=\"font-semibold text-foreground group-hover:text-primary\">\n                                  #{transaction.id}\n                                </h3>\n                                <span className=\"text-xs text-muted-foreground bg-muted px-2 py-1 rounded\">\n                                  {getCategoryName(transaction.category)}\n                                </span>\n                              </div>\n                              \n                              <div className=\"text-sm text-muted-foreground\">\n                                <p className=\"flex items-center gap-1\">\n                                  <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                                  </svg>\n                                  {formatDate(transaction.date)}\n                                </p>\n                              </div>\n\n                              {transaction.amount && (\n                                <span className={transaction.type === \"expense\" || transaction.type === \"expence\" ? \"text-red-600 opacity-90\" : \"text-green-600 opacity-90\"}>\n                               {(transaction.type === \"expense\" || transaction.type === \"expence\" ? \"-\" : \"+\")}\n                               {Math.abs(transaction.amount).toFixed(2)} BYN\n                               </span>\n                              )}\n\n                              {transaction.description && (\n                                <p className=\"text-xs text-muted-foreground truncate\">\n                                  {transaction.description}\n                                </p>\n                              )}\n                            </div>\n                          </Link>\n                        </CardContent>\n                      </Card>\n                    ))\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Main Content Area */}\n            <main className=\"mt-11\">\n              <div className=\" justify-center items-center\">\n                {children}\n              </div>\n            </main>\n          </div>\n        </div>\n      </div>\n    )\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"text-center space-y-4\">\n          <div className=\"w-16 h-16 mx-auto bg-destructive/10 rounded-full flex items-center justify-center\">\n            <svg className=\"w-8 h-8 text-destructive\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n            </svg>\n          </div>\n          <h1 className=\"text-2xl font-bold text-foreground\">Failed to load transactions</h1>\n          <p className=\"text-muted-foreground\">There was an error loading your transaction data.</p>\n          <button \n            onClick={() => window.location.reload()}\n            className=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}