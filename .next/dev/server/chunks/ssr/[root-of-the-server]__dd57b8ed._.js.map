{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vitaliylevdansky/Desktop/PROGRAMMING/prog/my-app-router/my-app/app/services/logic.ts"],"sourcesContent":["\n\n\nexport type Transaction = {\n  id?: string | number\n  amount: number\n  date: string\n  category: string\n  description: string\n  type: \"expense\" | \"income\" | string\n}\n\ninterface SortOptions {\n  field: string;\n  direction: 'asc' | 'desc';\n}\n\ninterface Params {\n  page?: number;\n  limit?: number;\n  filters?: Record<string, any>;\n  sort?: SortOptions;\n}\n\nexport type Category = {\n  id: string | number\n  name: string\n}\n\nclass Api {\n  #baseURL = \"http://localhost:3000\";\n  #categoriesCache: Category [] | null = null;\n\n  async #fetch(path: string, options?: RequestInit): Promise<any> {\n    const response = await fetch(this.#baseURL + path, options)\n    if (!response.ok) {\n      const text = await response.text()\n      throw new Error(`HTTP error ${response.status}: ${text}`)\n    }\n  \n    return await response.json()\n  }\n\n\n  getAllCategories = async (): Promise<Category[]> => {\n    if (!this.#categoriesCache) {\n      const categories = await this.#fetch(\"/categories\");\n      this.#categoriesCache = Array.isArray(categories) ? categories : [];\n    }\n    return this.#categoriesCache;\n  };\n\n  createTransaction = (transaction: Transaction): Promise<Transaction[]> => {\n    // Should the cache always be cleared? Review if necessary\n    this.#categoriesCache = null;\n    return this.#fetch(\"/transactions\", { method: \"POST\", body: JSON.stringify(transaction) });\n  };\n\n  deleteTransaction = (id: number | string): Promise<void> =>\n    this.#fetch(`/transactions/${id}`, { method: \"DELETE\" });\n\n  updateTransaction = (id: number | string, updates: Partial<Transaction[]>): Promise<any> =>\n    this.#fetch(`/transactions/${id}`, { method: \"PATCH\", body: JSON.stringify(updates) });\n\n  async getTransactions(params: Params = {}): Promise<any> {\n    const { page = 1, limit = 10, filters = {}, sort = { field: '', direction: 'asc' } } = params;\n    const query = new URLSearchParams({ _page: page.toString(), _per_page: limit.toString(), ...filters });\n\n    if (sort.field) {\n      query.set(\"_sort\", sort.direction === \"desc\" ? `-${sort.field}` : sort.field);\n    }\n\n    const result = await this.#fetch(`/transactions?${query.toString()}`);\n    return { ...result, currentPage: page };\n  }\n}\n\nexport default Api;\n"],"names":[],"mappings":";;;;AA6BA,MAAM;IACJ,CAAA,OAAQ,GAAG,wBAAwB;IACnC,CAAA,eAAgB,GAAuB,KAAK;IAE5C,MAAM,CAAA,KAAM,CAAC,IAAY,EAAE,OAAqB;QAC9C,MAAM,WAAW,MAAM,MAAM,IAAI,CAAC,CAAA,OAAQ,GAAG,MAAM;QACnD,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,MAAM;QAC1D;QAEA,OAAO,MAAM,SAAS,IAAI;IAC5B;IAGA,mBAAmB;QACjB,IAAI,CAAC,IAAI,CAAC,CAAA,eAAgB,EAAE;YAC1B,MAAM,aAAa,MAAM,IAAI,CAAC,CAAA,KAAM,CAAC;YACrC,IAAI,CAAC,CAAA,eAAgB,GAAG,MAAM,OAAO,CAAC,cAAc,aAAa,EAAE;QACrE;QACA,OAAO,IAAI,CAAC,CAAA,eAAgB;IAC9B,EAAE;IAEF,oBAAoB,CAAC;QACnB,0DAA0D;QAC1D,IAAI,CAAC,CAAA,eAAgB,GAAG;QACxB,OAAO,IAAI,CAAC,CAAA,KAAM,CAAC,iBAAiB;YAAE,QAAQ;YAAQ,MAAM,KAAK,SAAS,CAAC;QAAa;IAC1F,EAAE;IAEF,oBAAoB,CAAC,KACnB,IAAI,CAAC,CAAA,KAAM,CAAC,CAAC,cAAc,EAAE,IAAI,EAAE;YAAE,QAAQ;QAAS,GAAG;IAE3D,oBAAoB,CAAC,IAAqB,UACxC,IAAI,CAAC,CAAA,KAAM,CAAC,CAAC,cAAc,EAAE,IAAI,EAAE;YAAE,QAAQ;YAAS,MAAM,KAAK,SAAS,CAAC;QAAS,GAAG;IAEzF,MAAM,gBAAgB,SAAiB,CAAC,CAAC,EAAgB;QACvD,MAAM,EAAE,OAAO,CAAC,EAAE,QAAQ,EAAE,EAAE,UAAU,CAAC,CAAC,EAAE,OAAO;YAAE,OAAO;YAAI,WAAW;QAAM,CAAC,EAAE,GAAG;QACvF,MAAM,QAAQ,IAAI,gBAAgB;YAAE,OAAO,KAAK,QAAQ;YAAI,WAAW,MAAM,QAAQ;YAAI,GAAG,OAAO;QAAC;QAEpG,IAAI,KAAK,KAAK,EAAE;YACd,MAAM,GAAG,CAAC,SAAS,KAAK,SAAS,KAAK,SAAS,CAAC,CAAC,EAAE,KAAK,KAAK,EAAE,GAAG,KAAK,KAAK;QAC9E;QAEA,MAAM,SAAS,MAAM,IAAI,CAAC,CAAA,KAAM,CAAC,CAAC,cAAc,EAAE,MAAM,QAAQ,IAAI;QACpE,OAAO;YAAE,GAAG,MAAM;YAAE,aAAa;QAAK;IACxC;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///Users/vitaliylevdansky/Desktop/PROGRAMMING/prog/my-app-router/my-app/app/%28auth%29/users/layout.tsx"],"sourcesContent":["// // import { users } from '../../user-data'\n// // import Link from 'next/link'\n// // import { Card, CardContent } from '@/components/ui/card'\n// // import { ReactNode } from \"react\"\n\n// // export default function Layout({\n// //   children,\n// // }: Readonly<{\n// //   children: React.ReactNode\n// // }>) {\n// //   return (\n// //     <div  className=\"min-h-screen p-5\">\n// //       <div className=\"flex gap-6 justify-between items-center\">\n// //         <div className=\"flex flex-col gap-4 min-w-40 max-w-xs \">\n// //           {users.map((user) => (\n// //             <Card key={user.id} className=\"hover:bg-accent transition-color dark:text-white dark:bg-[#0c1017]\">\n// //               <CardContent className=\"p-4\">\n// //                 <Link\n// //                   href={`/users/${user.id}`}\n// //                   className=\"text-lg font-semibold block hover:underline\"\n// //                 >\n// //                   {user.name}\n// //                 </Link>\n// //               </CardContent>\n// //             </Card>\n// //           ))}\n// //         </div>\n// //          <div >{children}</div>\n// //       </div>\n// //     </div>\n// //   )\n// // }\n\n// import { users } from '../../user-data'\n// import Link from 'next/link'\n// import { Card, CardContent } from '@/components/ui/card'\n// import { ReactNode } from \"react\"\n// import Api from '@/app/services/logic';\n// import { Transaction, Category } from '@/app/services/logic';\n\n// export default function Layout({\n//   children,\n// }: Readonly<{\n//   children: React.ReactNode\n// }>) {\n\n//   const api = new Api();\n\n//   const result = await api.getTransactions({ page: 1, limit: 1000 });\n//   const transaction = result.data.find(\n//     (tx: any) => String(tx.id) === id\n//   );\n\n//   if (!transaction) {\n//     return notFound();\n//   }\n\n//   function getCategoryName(id: string | number): string {\n//     if (!categories.length) {\n//       return \"Unknown\"\n//     }\n    \n   \n//     let category = categories.find(cat => cat.id == id)\n    \n  \n//     if (!category) {\n//       category = categories.find(cat => String(cat.id) === String(id))\n//     }\n    \n//     // If still not found, try converting both to numbers\n//     if (!category) {\n//       const numId = Number(id)\n//       if (!isNaN(numId)) {\n//         category = categories.find(cat => Number(cat.id) === numId)\n//       }\n//     }\n    \n//     if (!category) {\n//       console.warn(`Category not found for id: ${id}. Available:`, categories.map(c => c.id))\n//       return \"Unknown\"\n//     }\n    \n//     return category.name\n//   }\n\n  \n//   const displayTransaction = {\n//     ...transaction,\n//     category: getCategoryName(transaction.category),\n//   };\n\n//   return (\n//     <div className=\"min-h-screen p-4 sm:p-8 flex justify-between\">\n//       <div className=\"flex flex-col sm:flex-row gap-4 sm:gap-6 justify-center items-start w-full max-w-5xl\">\n//         {/* Sidebar: users list */}\n//         <div className=\"flex flex-col gap-2 sm:gap-4 sm:min-w-30 min-w-20 max-w-xs\">\n//           {/* {users.map((user) => (\n//             <Card \n//               key={user.id} \n//               className=\"hover:bg-accent transition-colors dark:text-white dark:bg-[#0c1017]\"\n//             >\n//               <CardContent className=\"p-3 sm:p-4\">\n//                 <Link\n//                   href={`/users/${user.id}`}\n//                   className=\"text-base sm:text-lg font-semibold block hover:underline text-center sm:text-left\"\n//                 >\n//                   {user.name}\n//                 </Link>\n//               </CardContent>\n//             </Card>\n//           ))} */}\n\n\n//         </div>\n\n//         {/* Main content area */}\n//         <main className=\"grow w-full min-w-0\">\n//           {children}\n//         </main>\n//       </div>\n//     </div>\n//   )\n// }\n\n\n// app/transactions/layout.tsx\nimport { Card, CardContent } from '@/components/ui/card'\nimport Link from 'next/link'\nimport Api, { Transaction } from '@/app/services/logic';\nimport { useRouter } from 'next/router';\n\nexport default async function TransactionsLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode\n}>) {\n\n  const api = new Api();\n  const router = useRouter();\n  try {\n    const [transactionsResult, categoriesResult] = await Promise.all([\n      api.getTransactions({ page: 1, limit: 1000 }),\n      api.getAllCategories()\n    ]);\n    \n   \n\n    const transactions = transactionsResult.data || [];\n\n\n    // Helper function to get category name\n    const getCategoryName = (categoryId: string | number): string => {\n      if (!categoryId) return 'Uncategorized';\n      \n      const category = categoriesResult.find(cat => \n        cat.id == categoryId || \n        String(cat.id) === String(categoryId) ||\n        Number(cat.id) === Number(categoryId)\n      );\n      return category?.name || 'Uncategorized';\n    };\n\n    // Format date for display\n    const formatDate = (dateString: string) => {\n      try {\n        return new Date(dateString).toLocaleDateString('en-US', {\n          year: 'numeric',\n          month: 'short',\n          day: 'numeric'\n        });\n      } catch {\n        return 'Invalid Date';\n      }\n    };\n\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"container mx-auto p-4 sm:p-6\">\n          <div className=\"flex flex-col lg:flex-row gap-6\">\n            {/* Sidebar - Transactions List */}\n            <div className=\"lg:w-80 shrink-0\">\n              <div className=\"sticky top-6\">\n                <h2 className=\"text-xl font-bold mb-4 text-foreground\">Transactions</h2>\n                <div className=\"space-y-3 max-h-[calc(100vh-120px)] overflow-y-auto\">\n                  {transactions.length === 0 ? (\n                    <Card className=\"p-4 text-center\">\n                      <p className=\"text-muted-foreground\">No transactions found</p>\n                    </Card>\n                  ) : (\n                    transactions.map((transaction: Transaction) => (\n                      <Card onClick={() => router.push(`/users/${transaction.id}`)}\n                        key={transaction.id} \n                        className=\"hover:bg-accent transition-colors duration-200 border shadow-sm\"\n                      >\n                        <CardContent className=\"p-4\">\n                          <Link\n                            href={`/transactions/${transaction.id}`}\n                            className=\"block hover:no-underline group\"\n                          >\n                            <div className=\"space-y-2\">\n                              <div className=\"flex justify-between items-start\">\n                                <h3 className=\"font-semibold text-foreground group-hover:text-primary\">\n                                  #{transaction.id}\n                                </h3>\n                                <span className=\"text-xs text-muted-foreground bg-muted px-2 py-1 rounded\">\n                                  {getCategoryName(transaction.category)}\n                                </span>\n                              </div>\n                              \n                              <div className=\"text-sm text-muted-foreground\">\n                                <p className=\"flex items-center gap-1\">\n                                  <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                                  </svg>\n                                  {formatDate(transaction.date)}\n                                </p>\n                              </div>\n\n                              {transaction.amount && (\n                                <p className={`text-sm font-medium ${\n                                  Number(transaction.amount) >= 0 \n                                    ? 'text-green-600' \n                                    : 'text-red-600'\n                                }`}>\n                                  {Number(transaction.amount) >= 0 ? '+' : '-'}\n                                  ${Math.abs(Number(transaction.amount)).toFixed(2)}\n                                </p>\n                              )}\n\n                              {transaction.description && (\n                                <p className=\"text-xs text-muted-foreground truncate\">\n                                  {transaction.description}\n                                </p>\n                              )}\n                            </div>\n                          </Link>\n                        </CardContent>\n                      </Card>\n                    ))\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Main Content Area */}\n            <main className=\"mt-11\">\n              <div className=\"\">\n                {children}\n              </div>\n            </main>\n          </div>\n        </div>\n      </div>\n    )\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"text-center space-y-4\">\n          <div className=\"w-16 h-16 mx-auto bg-destructive/10 rounded-full flex items-center justify-center\">\n            <svg className=\"w-8 h-8 text-destructive\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n            </svg>\n          </div>\n          <h1 className=\"text-2xl font-bold text-foreground\">Failed to load transactions</h1>\n          <p className=\"text-muted-foreground\">There was an error loading your transaction data.</p>\n          <button \n            onClick={() => window.location.reload()}\n            className=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}