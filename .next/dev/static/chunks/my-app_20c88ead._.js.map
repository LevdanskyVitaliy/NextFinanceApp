{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vitaliylevdansky/Desktop/PROGRAMMING/prog/my-app-router/my-app/app/services/logic.ts"],"sourcesContent":["\n\n\nexport type Transaction = {\n  id?: string | number\n  amount: number\n  date: string\n  category: string\n  description: string\n  type: \"expense\" | \"income\" | string\n}\n\nexport type SortOptions ={\n  field: string;\n  direction: 'asc' | 'desc';\n}\n\ninterface Params {\n  page?: number;\n  limit?: number;\n  filters?: Record<string, any>;\n  sort?: SortOptions;\n}\n\nexport type Category = {\n  id: string | number\n  name: string\n}\n\nclass Api {\n  #baseURL = \"http://localhost:3000\";\n  #categoriesCache: Category [] | null = null;\n\n  async #fetch(path: string, options?: RequestInit): Promise<any> {\n    const response = await fetch(this.#baseURL + path, options)\n    if (!response.ok) {\n      const text = await response.text()\n      throw new Error(`HTTP error ${response.status}: ${text}`)\n    }\n  \n    return await response.json()\n  }\n\n\n  getAllCategories = async (): Promise<Category[]> => {\n    if (!this.#categoriesCache) {\n      const categories = await this.#fetch(\"/categories\");\n      this.#categoriesCache = Array.isArray(categories) ? categories : [];\n    }\n    return this.#categoriesCache;\n  };\n\n  createTransaction = (transaction: Transaction): Promise<Transaction[]> => {\n    // Should the cache always be cleared? Review if necessary\n    this.#categoriesCache = null;\n    return this.#fetch(\"/transactions\", { method: \"POST\", body: JSON.stringify(transaction) });\n  };\n\n  deleteTransaction = (id: number | string): Promise<void> =>\n    this.#fetch(`/transactions/${id}`, { method: \"DELETE\" });\n\n  updateTransaction = (id: number | string, updates: Partial<Transaction>): Promise<Transaction> =>\n    this.#fetch(`/transactions/${id}`, { \n      method: \"PATCH\", \n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(updates) \n    });\n\n  // NEW: Add method to get single transaction\n\n  getTransactionById = async (id: string | number): Promise<Transaction> => {\n    const response = await fetch(`${this.#baseURL}/transactions/${id}`);\n    \n    if (!response.ok) {\n      if (response.status === 404) {\n        throw new Error(`Transaction with id ${id} not found`);\n      }\n      const text = await response.text();\n      throw new Error(`HTTP error ${response.status}: ${text}`);\n    }\n    \n    return await response.json();\n  };\n\n  async getTransactions(params: Params = {}): Promise<any> {\n    const { page = 1, limit = 10, filters = {}, sort = { field: '', direction: 'desc' } } = params;\n    const query = new URLSearchParams({ _page: page.toString(), _per_page: limit.toString(), ...filters });\n\n    if (sort.field) {\n      query.set(\"_sort\", sort.direction === \"desc\" ? `-${sort.field}` : sort.field);\n    }\n\n    const result = await this.#fetch(`/transactions?${query.toString()}`);\n    return { ...result, currentPage: page };\n  }\n}\n\nexport default Api;\n"],"names":[],"mappings":";;;;AA6BA,MAAM;IACJ,CAAA,OAAQ,GAAG,wBAAwB;IACnC,CAAA,eAAgB,GAAuB,KAAK;IAE5C,MAAM,CAAA,KAAM,CAAC,IAAY,EAAE,OAAqB;QAC9C,MAAM,WAAW,MAAM,MAAM,IAAI,CAAC,CAAA,OAAQ,GAAG,MAAM;QACnD,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,MAAM;QAC1D;QAEA,OAAO,MAAM,SAAS,IAAI;IAC5B;IAGA,mBAAmB;QACjB,IAAI,CAAC,IAAI,CAAC,CAAA,eAAgB,EAAE;YAC1B,MAAM,aAAa,MAAM,IAAI,CAAC,CAAA,KAAM,CAAC;YACrC,IAAI,CAAC,CAAA,eAAgB,GAAG,MAAM,OAAO,CAAC,cAAc,aAAa,EAAE;QACrE;QACA,OAAO,IAAI,CAAC,CAAA,eAAgB;IAC9B,EAAE;IAEF,oBAAoB,CAAC;QACnB,0DAA0D;QAC1D,IAAI,CAAC,CAAA,eAAgB,GAAG;QACxB,OAAO,IAAI,CAAC,CAAA,KAAM,CAAC,iBAAiB;YAAE,QAAQ;YAAQ,MAAM,KAAK,SAAS,CAAC;QAAa;IAC1F,EAAE;IAEF,oBAAoB,CAAC,KACnB,IAAI,CAAC,CAAA,KAAM,CAAC,CAAC,cAAc,EAAE,IAAI,EAAE;YAAE,QAAQ;QAAS,GAAG;IAE3D,oBAAoB,CAAC,IAAqB,UACxC,IAAI,CAAC,CAAA,KAAM,CAAC,CAAC,cAAc,EAAE,IAAI,EAAE;YACjC,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB,GAAG;IAEL,4CAA4C;IAE5C,qBAAqB,OAAO;QAC1B,MAAM,WAAW,MAAM,MAAM,GAAG,IAAI,CAAC,CAAA,OAAQ,CAAC,cAAc,EAAE,IAAI;QAElE,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,IAAI,SAAS,MAAM,KAAK,KAAK;gBAC3B,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,GAAG,UAAU,CAAC;YACvD;YACA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,MAAM;QAC1D;QAEA,OAAO,MAAM,SAAS,IAAI;IAC5B,EAAE;IAEF,MAAM,gBAAgB,SAAiB,CAAC,CAAC,EAAgB;QACvD,MAAM,EAAE,OAAO,CAAC,EAAE,QAAQ,EAAE,EAAE,UAAU,CAAC,CAAC,EAAE,OAAO;YAAE,OAAO;YAAI,WAAW;QAAO,CAAC,EAAE,GAAG;QACxF,MAAM,QAAQ,IAAI,gBAAgB;YAAE,OAAO,KAAK,QAAQ;YAAI,WAAW,MAAM,QAAQ;YAAI,GAAG,OAAO;QAAC;QAEpG,IAAI,KAAK,KAAK,EAAE;YACd,MAAM,GAAG,CAAC,SAAS,KAAK,SAAS,KAAK,SAAS,CAAC,CAAC,EAAE,KAAK,KAAK,EAAE,GAAG,KAAK,KAAK;QAC9E;QAEA,MAAM,SAAS,MAAM,IAAI,CAAC,CAAA,KAAM,CAAC,CAAC,cAAc,EAAE,MAAM,QAAQ,IAAI;QACpE,OAAO;YAAE,GAAG,MAAM;YAAE,aAAa;QAAK;IACxC;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///Users/vitaliylevdansky/Desktop/PROGRAMMING/prog/my-app-router/my-app/app/%28auth%29/users/%5Bid%5D/edit/page.tsx"],"sourcesContent":["\n\n\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Api, { Transaction, Category } from \"@/app/services/logic\";\n\nexport default async function EditTransactionPage({ \n  params \n}: { \n  params: Promise<{ id: string }> \n}) {\n  // Await the params promise\n  const { id } = await params;\n  const api = new Api();\n\n  try {\n    // Fetch data in parallel\n    const [categories, transaction] = await Promise.all([\n      api.getAllCategories(),\n      api.getTransactionById(id)\n    ]);\n\n    if (!transaction) {\n      return <div className=\"text-red-600 p-4 text-center\">Transaction not found</div>;\n    }\n\n    // Format date for input[type=date]\n    const formattedTransaction = {\n      ...transaction,\n      date: new Date(transaction.date).toISOString().split(\"T\")[0]\n    };\n\n    return (\n      <div className=\"max-w-xl p-6 rounded-md bg-[#f5f6fb] dark:bg-[#0c1017] dark:text-white shadow-md mx-auto mt-8\">\n        <h1 className=\"text-2xl font-semibold mb-6\">Edit Transaction</h1>\n        <EditForm \n          transaction={formattedTransaction} \n          categories={categories} \n        />\n      </div>\n    );\n  } catch (error) {\n    console.error(\"Error loading transaction:\", error);\n    return <div className=\"text-red-600 p-4 text-center\">Failed to load transaction</div>;\n  }\n}\n\n// Client component for the form\nfunction EditForm({ \n  transaction, \n  categories \n}: { \n  transaction: Transaction; \n  categories: Category[] \n}) {\n  const router = useRouter();\n  const api = new Api();\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [formData, setFormData] = useState(transaction);\n\n  function handleChange(\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>\n  ) {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: name === \"amount\" ? parseFloat(value) || 0 : value,\n    }));\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    if (!formData.id) return;\n\n    setSaving(true);\n    setError(null);\n    try {\n      await api.updateTransaction(formData.id, {\n        amount: formData.amount,\n        category: formData.category,\n        description: formData.description,\n        type: formData.type,\n        date: new Date(formData.date).toISOString(),\n      });\n      router.push(\"/\");\n    } catch (err) {\n      console.error(\"Error updating transaction:\", err);\n      setError(\"Failed to save transaction\");\n    } finally {\n      setSaving(false);\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"flex flex-col gap-6\">\n      <div className=\"block\">\n        <span className=\"font-medium mb-1 block\">Type</span>\n        <select\n          name=\"type\"\n          value={formData.type}\n          onChange={handleChange}\n          className=\"w-full rounded border border-gray-300 bg-white dark:bg-gray-700 p-2 dark:text-white\"\n          required\n        >\n          <option value=\"expense\">Expense</option>\n          <option value=\"income\">Income</option>\n        </select>\n      </div>\n\n      <div className=\"block\">\n        <span className=\"font-medium mb-1 block\">Amount</span>\n        <input\n          type=\"number\"\n          name=\"amount\"\n          value={formData.amount}\n          min={0}\n          step=\"0.01\"\n          className=\"w-full rounded border border-gray-300 bg-white dark:bg-gray-700 p-2 dark:text-white\"\n          onChange={handleChange}\n          required\n        />\n      </div>\n\n      <div className=\"block\">\n        <span className=\"font-medium mb-1 block\">Category</span>\n        <select\n          name=\"category\"\n          value={formData.category}\n          onChange={handleChange}\n          className=\"w-full rounded border border-gray-300 bg-white dark:bg-gray-700 p-2 dark:text-white\"\n          required\n        >\n          {categories.map((cat) => (\n            <option key={cat.id} value={String(cat.id)}>\n              {cat.name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"block\">\n        <span className=\"font-medium mb-1 block\">Description</span>\n        <textarea\n          name=\"description\"\n          rows={3}\n          value={formData.description}\n          onChange={handleChange}\n          className=\"w-full rounded border border-gray-300 bg-white dark:bg-gray-700 p-2 dark:text-white resize-none\"\n          required\n        />\n      </div>\n\n      <div className=\"block\">\n        <span className=\"font-medium mb-1 block\">Date</span>\n        <input\n          type=\"date\"\n          name=\"date\"\n          value={formData.date}\n          onChange={handleChange}\n          className=\"w-full rounded border border-gray-300 bg-white dark:bg-gray-700 p-2 dark:text-white\"\n          required\n        />\n      </div>\n\n      {error && <div className=\"text-red-600 bg-red-100 dark:bg-red-900 p-3 rounded\">{error}</div>}\n\n      <div className=\"flex gap-4\">\n        <button\n          type=\"button\"\n          onClick={() => router.back()}\n          className=\"flex-1 bg-gray-500 text-white p-3 rounded hover:bg-gray-400\"\n        >\n          Cancel\n        </button>\n        <button\n          type=\"submit\"\n          disabled={saving}\n          className=\"flex-1 bg-blue-600 text-white p-3 rounded hover:bg-blue-500 disabled:opacity-70\"\n        >\n          {saving ? \"Saving...\" : \"Save Changes\"}\n        </button>\n      </div>\n    </form>\n  );\n}\n\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///Users/vitaliylevdansky/Desktop/PROGRAMMING/prog/my-app-router/my-app/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}