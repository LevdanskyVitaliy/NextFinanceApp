(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78953,t=>{"use strict";let e=class{#t="http://localhost:3000";#e=null;async #a(t,e){let a=await fetch(this.#t+t,e);if(!a.ok){let t=await a.text();throw Error(`HTTP error ${a.status}: ${t}`)}return await a.json()}getAllCategories=async()=>{if(!this.#e){let t=await this.#a("/categories");this.#e=Array.isArray(t)?t:[]}return this.#e};createTransaction=t=>(this.#e=null,this.#a("/transactions",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}));deleteTransaction=t=>this.#a(`/transactions/${t}`,{method:"DELETE"});updateTransaction=(t,e)=>this.#a(`/transactions/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});getTransactionById=async t=>{let e=await fetch(`${this.#t}/transactions/${t}`);if(!e.ok){if(404===e.status)throw Error(`Transaction with id ${t} not found`);let a=await e.text();throw Error(`HTTP error ${e.status}: ${a}`)}return await e.json()};async getTransactions(t={}){let{page:e=1,limit:a=10,filters:r={},sort:i={field:"",direction:"desc"}}=t,s=new URLSearchParams({_page:e.toString(),_per_page:a.toString(),...r});return i.field&&s.set("_sort","desc"===i.direction?`-${i.field}`:i.field),{...await this.#a(`/transactions?${s.toString()}`),currentPage:e}}};t.s(["default",0,e])},58052,t=>{"use strict";var e=t.i(39802),a=t.i(82918),r=t.i(78953);let i=(0,a.createContext)(void 0),s=new r.default,o="transactions_table_options",n={page:1,limit:10,sort:{field:"date",direction:"desc"},filters:{}};function c({children:t}){let[r,c]=(0,a.useState)([]),[l,d]=(0,a.useState)([]),[f,h]=(0,a.useState)(!1),[g,u]=(0,a.useState)([]),[y,p]=(0,a.useState)(1),[T,w]=(0,a.useState)(0),[S,m]=(0,a.useState)(!1),[b,C]=(0,a.useState)(n),[E,P]=(0,a.useState)(!1);(0,a.useEffect)(()=>{C((()=>{try{let t=localStorage.getItem(o);if(t){let e=JSON.parse(t);if(e&&"object"==typeof e)return{page:Number(e.page)||n.page,limit:Number(e.limit)||n.limit,sort:e.sort||n.sort,filters:e.filters||n.filters}}}catch(t){console.error("Error loading saved table options:",t)}return n})()),P(!0)},[]),(0,a.useEffect)(()=>{if(E)try{localStorage.setItem(o,JSON.stringify(b))}catch(t){console.error("Error saving table options:",t)}},[b,E]),(0,a.useEffect)(()=>{E&&(v(b),$())},[E]);let $=async()=>{h(!0);try{let[t,e]=await Promise.all([s.getTransactions({page:1,limit:1e4,sort:{field:"date",direction:"desc"}}),s.getAllCategories()]);c(t.data||[]),Array.isArray(e)?d(e):d([])}catch(t){console.error("Error fetching data:",t)}finally{h(!1)}},v=(0,a.useCallback)(async t=>{m(!0);try{let e=await s.getTransactions({page:t.page,limit:t.limit,sort:t.sort?.field?{field:t.sort.field,direction:t.sort.direction||"desc"}:{field:"date",direction:"desc"},filters:t.filters});u(e.data||[]),p(e.pages||1),w(e.items||0),C(e=>JSON.stringify(e)===JSON.stringify(t)?e:t)}catch(t){console.error("Error fetching table data:",t),u([]),p(1),w(0)}finally{m(!1)}},[]),A=async()=>{await $(),await v(b)},O=async t=>{c(e=>[t,...e]),await $(),await v(b)},N=async t=>{try{if(await s.deleteTransaction(t),c(e=>e.filter(e=>e.id!==t)),u(e=>e.filter(e=>e.id!==t)),w(t=>Math.max(0,t-1)),1===g.length&&b.page>1){let t=b.page-1,e={...b,page:t};v(e)}else v(b)}catch(t){throw console.error("Error deleting transaction:",t),v(b),t}};return(0,e.jsx)(i.Provider,{value:{transactions:r,categories:l,loading:f,refreshData:A,addTransaction:O,tableData:{transactions:g,totalPages:y,totalItems:T,loading:S},fetchTableData:v,deleteTransaction:N,currentTableOptions:b},children:t})}function l(){let t=(0,a.useContext)(i);if(void 0===t)throw Error("useTransactions must be used within a TransactionProvider");return t}t.s(["TransactionProvider",()=>c,"useTransactions",()=>l])}]);