(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79915,(t,e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=t=>{}},78953,t=>{"use strict";let e=class{#t="http://localhost:3000";#e=null;async #r(t,e){let r=await fetch(this.#t+t,e);if(!r.ok){let t=await r.text();throw Error(`HTTP error ${r.status}: ${t}`)}return await r.json()}getAllCategories=async()=>{if(!this.#e){let t=await this.#r("/categories");this.#e=Array.isArray(t)?t:[]}return this.#e};createTransaction=t=>(this.#e=null,this.#r("/transactions",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}));deleteTransaction=t=>this.#r(`/transactions/${t}`,{method:"DELETE"});updateTransaction=(t,e)=>this.#r(`/transactions/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});getTransactionById=async t=>{let e=await fetch(`${this.#t}/transactions/${t}`);if(!e.ok){if(404===e.status)throw Error(`Transaction with id ${t} not found`);let r=await e.text();throw Error(`HTTP error ${e.status}: ${r}`)}return await e.json()};async getTransactions(t={}){let{page:e=1,limit:r=10,filters:a={},sort:i={field:"",direction:"desc"}}=t,s=new URLSearchParams({_page:e.toString(),_per_page:r.toString(),...a});return i.field&&s.set("_sort","desc"===i.direction?`-${i.field}`:i.field),{...await this.#r(`/transactions?${s.toString()}`),currentPage:e}}};t.s(["default",0,e])},58052,t=>{"use strict";var e=t.i(39802),r=t.i(82918),a=t.i(78953);let i=(0,r.createContext)(void 0),s=new a.default,o="transactions_table_options",n={page:1,limit:10,sort:{field:"date",direction:"desc"},filters:{}};function c({children:t}){let[a,c]=(0,r.useState)([]),[l,d]=(0,r.useState)([]),[f,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)([]),[y,p]=(0,r.useState)(1),[T,w]=(0,r.useState)(0),[m,S]=(0,r.useState)(!1),[b,C]=(0,r.useState)(n),[E,P]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C((()=>{try{let t=localStorage.getItem(o);if(t){let e=JSON.parse(t);if(e&&"object"==typeof e)return{page:Number(e.page)||n.page,limit:Number(e.limit)||n.limit,sort:e.sort||n.sort,filters:e.filters||n.filters}}}catch(t){console.error("Error loading saved table options:",t)}return n})()),P(!0)},[]),(0,r.useEffect)(()=>{if(E)try{localStorage.setItem(o,JSON.stringify(b))}catch(t){console.error("Error saving table options:",t)}},[b,E]),(0,r.useEffect)(()=>{E&&(v(b),O())},[E]);let O=async()=>{u(!0);try{let[t,e]=await Promise.all([s.getTransactions({page:1,limit:1e4,sort:{field:"date",direction:"desc"}}),s.getAllCategories()]);c(t.data||[]),Array.isArray(e)?d(e):d([])}catch(t){console.error("Error fetching data:",t)}finally{u(!1)}},v=(0,r.useCallback)(async t=>{S(!0);try{let e=await s.getTransactions({page:t.page,limit:t.limit,sort:t.sort?.field?{field:t.sort.field,direction:t.sort.direction||"desc"}:{field:"date",direction:"desc"},filters:t.filters});g(e.data||[]),p(e.pages||1),w(e.items||0),C(e=>JSON.stringify(e)===JSON.stringify(t)?e:t)}catch(t){console.error("Error fetching table data:",t),g([]),p(1),w(0)}finally{S(!1)}},[]),$=async()=>{await O(),await v(b)},j=async t=>{c(e=>[t,...e]),await O(),await v(b)},A=async t=>{try{if(await s.deleteTransaction(t),c(e=>e.filter(e=>e.id!==t)),g(e=>e.filter(e=>e.id!==t)),w(t=>Math.max(0,t-1)),1===h.length&&b.page>1){let t=b.page-1,e={...b,page:t};v(e)}else v(b)}catch(t){throw console.error("Error deleting transaction:",t),v(b),t}};return(0,e.jsx)(i.Provider,{value:{transactions:a,categories:l,loading:f,refreshData:$,addTransaction:j,tableData:{transactions:h,totalPages:y,totalItems:T,loading:m},fetchTableData:v,deleteTransaction:A,currentTableOptions:b},children:t})}function l(){let t=(0,r.useContext)(i);if(void 0===t)throw Error("useTransactions must be used within a TransactionProvider");return t}t.s(["TransactionProvider",()=>c,"useTransactions",()=>l])}]);